@model AspCoreFirstApp.ViewModels.PaginatedListViewModel<AspCoreFirstApp.Models.Movie>

@{
    ViewData["Title"] = "Liste des Films";
    ViewBag.SortBy = Model.SortBy;
    ViewBag.SortOrder = Model.SortOrder;
}

<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-md-6">
            <h1>@ViewData["Title"]</h1>
        </div>
        <div class="col-md-6 text-end">
            <a href="@Url.Action("Create", "Movie")" class="btn btn-primary">
                <i class="bi bi-plus-circle"></i> Ajouter un film
            </a>
        </div>
    </div>

    @if (Model.Items.Any())
    {
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>
                            <a href="@Url.Action("Index", "Movie", new { sortBy = "Name", sortOrder = Model.SortOrder == "asc" && Model.SortBy == "Name" ? "desc" : "asc" })">
                                Nom
                                @if (Model.SortBy == "Name")
                                {
                                    <i class="bi @(Model.SortOrder == "asc" ? "bi-sort-up" : "bi-sort-down")"></i>
                                }
                            </a>
                        </th>
                        <th>Genre</th>
                        <th class="text-center">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var movie in Model.Items)
                    {
                        <tr>
                            <td>@movie.Name</td>
                            <td>@movie.Genre?.Name ?? "Non défini"</td>
                            <td class="text-center">
                                <a href="@Url.Action("Details", "Movie", new { id = movie.Id })" class="btn btn-sm btn-info">Détails</a>
                                <a href="@Url.Action("Edit", "Movie", new { id = movie.Id })" class="btn btn-sm btn-warning">Éditer</a>
                                <a href="@Url.Action("Delete", "Movie", new { id = movie.Id })" class="btn btn-sm btn-danger">Supprimer</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        @await Html.PartialAsync("_Pagination", Model.Pagination)
    }
    else
    {
        <div class="alert alert-info" role="alert">
            <i class="bi bi-info-circle"></i> Aucun film disponible.
        </div>
    }
</div>

<style>
    .table-hover tbody tr:hover {
        background-color: #f5f5f5;
    }
    
    a {
        text-decoration: none;
    }
    
    th a {
        color: white;
    }
    
    th a:hover {
        color: #e0e0e0;
    }
</style>
